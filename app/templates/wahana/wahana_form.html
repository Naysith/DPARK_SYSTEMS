{% extends "admin/admin_base.html" %}

{% block title %}{{ 'Edit Wahana' if wahana else 'Tambah Wahana' }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <h2 class="mb-4 text-dark">
                {% if wahana %}
                    <i class="fas fa-edit me-2 text-warning"></i> Edit Wahana: {{ wahana[1] }}
                {% else %}
                    <i class="fas fa-plus-circle me-2 text-success"></i> Tambah Wahana Baru
                {% endif %}
            </h2>
            
            <div class="card shadow border-0">
                <div class="card-header bg-light">
                    <h5 class="mb-0">{{ 'Formulir Perubahan Data' if wahana else 'Formulir Data Wahana Baru' }}</h5>
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-tag me-1"></i> Nama Wahana</label>
                            <input type="text" name="nama_wahana" class="form-control"
                                   value="{{ wahana[1] if wahana else '' }}" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-file-alt me-1"></i> Deskripsi</label>
                            <textarea name="deskripsi" class="form-control" rows="3" required>{{ wahana[2] if wahana else '' }}</textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-cogs me-1"></i> Status Wahana</label>
                            <select name="status_wahana" class="form-select" required>
                                <option value="aktif" {% if wahana and wahana[3]=='aktif' %}selected{% endif %}>Aktif</option>
                                <option value="maintenance" {% if wahana and wahana[3]=='maintenance' %}selected{% endif %}>Maintenance</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold"><i class="fas fa-image me-1"></i> Gambar Wahana</label>
                            <input type="file" name="gambar_wahana" class="form-control">
                            {% if wahana and (wahana[4] or wahana[4] is binary) %}
                                <p class="mt-2 mb-1 text-muted">Gambar saat ini:</p>
                                <img src="{{ url_for('wahana_bp.wahana_image', id=wahana[0]) }}" 
                                     alt="Gambar Wahana Saat Ini" 
                                     class="img-thumbnail" 
                                     width="150">
                                <small class="d-block text-muted mt-1">Unggah file baru untuk mengganti.</small>
                            {% endif %}
                        </div>

                        <div class="d-flex justify-content-start pt-3 border-top">
                            <button type="submit" class="btn btn-success me-2 shadow-sm">
                                <i class="fas fa-save me-1"></i> Simpan
                            </button>
                            <a href="{{ url_for('wahana_bp.wahana_list') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-1"></i> Batal
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}