<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pembayaran</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Form Pembayaran</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, msg in messages %}
            <li class="{{ category }}">{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

  <!-- use dict keys provided by controllers instead of tuple/column indexes -->
  <h3>Reservasi ID: {{ reservasi.id_reservasi }}</h3>
  <p>Total Harga: Rp {{ "{:,.0f}".format(reservasi.total_harga) }}</p>
  <p>Status: {{ reservasi.status_pembayaran }}</p>

    <form method="POST">
    <label for="metode_pembayaran">Metode Pembayaran:</label>
    <select id="metode_pembayaran" name="metode_pembayaran" required>
      <option value="BANK">Bank Transfer</option>
      <option value="QRIS">QRIS</option>
    </select>

  <!-- ensure jumlah_bayar is the reservation total_harga (not user id) -->
  <input type="hidden" name="jumlah_bayar" value="{{ reservasi.total_harga }}">

        <button type="submit">Bayar Sekarang</button>
    </form>

    <p><a href="{{ url_for('reservasi_bp.reservasi_list') }}">Kembali ke daftar reservasi</a></p>
</body>
</html>
