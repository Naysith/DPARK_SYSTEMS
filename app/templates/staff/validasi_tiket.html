<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Validasi Tiket</title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'src/css/input.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'src/css/output.css') }}">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.tailwindcss.css">
</head>

<body class="bg-white poppins-regular">

    <div class="flex h-screen">
        <!-- Sidebar -->
        {% include 'UI-components/sidebar.html' %}
        <!-- End Sidebar -->

        <main class="flex-1 h-screen overflow-y-auto bg-white p-10">

            <!-- Top bar -->
            {% include 'UI-components/topbar.html' %}
            <!-- End Top bar -->

            <div>
                <div class="flex justify-end items-end mb-4">
                    <button class="text-white bg-[#32D583] py-2 px-4 rounded-lg me-5">Export Excel</button>
                    <button onclick="openValidasiModal()" class="text-white bg-[#000264] py-2 px-4 rounded-lg">Cek Tiket</button>
                </div>
                <table id="tablePengecekanTiket" class="py-8">
                    <thead class="table-dark">
                        <tr>
                            <th>No</th>
                            <th>Kode Tiket</th>
                            <th>Tanggal Kunjungan</th>
                            <th>Nama Pelanggan</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for v in validasi_list %}
                        <tr>
                            <td>{{ loop . index }}</td>
                            <td>{{ v[1] }}</td>
                            <td>{{ v[2] . strftime('%d %B %Y %H:%M') }}</td>
                            <td>{{ v[3] }}</td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="3" class="text-center text-muted">Belum ada data validasi</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </main>

        <!-- MODAL POP UP -->
        {% include 'UI-components/modal-tiket.html' %}
        <!-- END MODAL -->

        <button
            class="fixed bottom-6 right-6 w-12 h-12 bg-red-500 text-white rounded-full flex items-center justify-center text-2xl font-bold shadow-lg hover:bg-red-600">
            ?
        </button>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.tailwindcss.com/"></script>
<script src="https://cdn.datatables.net/2.3.4/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.3.4/js/dataTables.tailwindcss.js"></script>
<script>
    new DataTable('#tablePengecekanTiket');

    
</script>

</html>

<!-- <div class="container">
    <h2 class="mb-4">Validasi Tiket</h2>

    <form method="POST" class="mb-4">
      <div class="input-group">
        <input type="text" name="kode_tiket" class="form-control" placeholder="Masukkan kode tiket" required>
        <button type="submit" name="cari" class="btn btn-primary">Cari Tiket</button>
      </div>
    </form>

    {% if result %}
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title mb-3">Detail Tiket</h5>
          <table class="table table-sm table-bordered">
            <tr><th>Kode Tiket</th><td>{{ result[1] }}</td></tr>
            <tr><th>Status</th>
              <td>
                {% if result[2] == 'belum_digunakan' %}
                  <span class="badge bg-warning text-dark">Belum Digunakan</span>
                {% else %}
                  <span class="badge bg-success">Sudah Digunakan</span>
                {% endif %}
              </td>
            </tr>
            <tr><th>Nama Wahana</th><td>{{ result[6] }}</td></tr>
            <tr><th>Nama Sesi</th><td>{{ result[4] }}</td></tr>
            <tr><th>Waktu Mulai</th><td>{{ result[5] }}</td></tr>
            <tr><th>Waktu Selesai</th><td>{{ result[6] }}</td></tr>
          </table>

          {% if result[2] == 'belum_digunakan' %}
            <form method="POST" class="mt-3">
              <input type="hidden" name="id_tiket" value="{{ result[0] }}">
              <input type="hidden" name="id_wahana" value="{{ result[7] }}">
              <button type="submit" name="validasi" class="btn btn-success">Validasi Tiket</button>
            </form>
          {% endif %}
        </div>
      </div>
    {% endif %}

    <a href="{{ url_for('staff_bp.staff_dashboard') }}" class="btn btn-secondary">‚Üê Kembali ke Dashboard</a>
  </div> -->
