<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Validasi Tiket</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">
  <div class="container">
    <h2 class="mb-4">Validasi Tiket</h2>

    <!-- Search form -->
    <form method="POST" class="mb-4">
      <div class="input-group">
        <input type="text" name="kode_tiket" class="form-control" placeholder="Masukkan kode tiket" required>
        <button type="submit" name="cari" class="btn btn-primary">Cari Tiket</button>
      </div>
    </form>

    {% if result %}
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title mb-3">Detail Tiket</h5>
          <table class="table table-sm table-bordered">
            <tr><th>Kode Tiket</th><td>{{ result[1] }}</td></tr>
            <tr><th>Status</th>
              <td>
                {% if result[2] == 'belum_digunakan' %}
                  <span class="badge bg-warning text-dark">Belum Digunakan</span>
                {% else %}
                  <span class="badge bg-success">Sudah Digunakan</span>
                {% endif %}
              </td>
            </tr>
            <tr><th>Nama Wahana</th><td>{{ result[6] }}</td></tr>
            <tr><th>Nama Sesi</th><td>{{ result[4] }}</td></tr>
            <tr><th>Waktu Mulai</th><td>{{ result[5] }}</td></tr>
            <tr><th>Waktu Selesai</th><td>{{ result[6] }}</td></tr>
          </table>

          {% if result[2] == 'belum_digunakan' %}
            <form method="POST" class="mt-3">
              <input type="hidden" name="id_tiket" value="{{ result[0] }}">
              <input type="hidden" name="id_wahana" value="{{ result[7] }}">
              <button type="submit" name="validasi" class="btn btn-success">Validasi Tiket</button>
            </form>
          {% endif %}
        </div>
      </div>
    {% endif %}

    <a href="{{ url_for('staff_bp.staff_dashboard') }}" class="btn btn-secondary">← Kembali ke Dashboard</a>
  </div>
</body>
</html>
